<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LightsprintSDK: Conventions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LightsprintSDK<span id="projectnumber">&#160;2021.08.08</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('main_conventions.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Conventions</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="gobjects"></a>
Terminology</h1>
<p><b>Mesh</b> is a set of triangles and vertices with fixed positions in local space. <br  />
<br  />
 <b>Object</b> is an instance of mesh, with position, rotation, scale and material properties. <b>Static object</b> never moves, rotates, deforms or significantly changes material properties. <b>Dynamic object</b> freely changes these properties. <br  />
<br  />
 <b>Scene</b> is a set of objects. <br  />
<br  />
 <b>Lightmap</b> is a per-pixel buffer (texture) or a per-vertex buffer with irradiance values (incoming light), not modulated by material color. <br  />
 Lightmap could contain direct, indirect or global (both) illumination. <br  />
 Lightmap with indirect illumination is sometimes called <b>ambient map</b>. <br  />
 Textures are typically created in sRGB color space with 8bit per channel precision, vertex buffers are typically created in linear space with float precision, but this is completely user defined, all combinations are supported.</p>
<h1><a class="anchor" id="glinking"></a>
Automatic library linking</h1>
<p>By default, including library header automatically links Lightsprint DLLs using #pragma comment(lib,name). Debug library is linked to debug exe, Release library to release exe. <br  />
 #define RR_STATIC / RR_GL_STATIC / RR_ED_STATIC / RR_IO_STATIC selects static library instead of DLL. <br  />
 #define RR_MANUAL_LINK / RR_GL_MANUAL_LINK / RR_ED_MANUAL_LINK / RR_IO_MANUAL_LINK disables automatic library linking, so you can e.g. manually link release library with debug exe. <br  />
 (version with RR_ affects LightsprintCore, RR_GL_ affects LightsprintGL, RR_ED_ affects LightsprintEd, RR_IO_ affects LightsprintIO)</p>
<h1><a class="anchor" id="gunits"></a>
Illumination units (radiometry, photometry, screen)</h1>
<p>Lightsprint solvers calculates in physically based units, in 32bit float per component precision. However, it is possible to feed solvers and receive results in screen colors or other units. Everything you need is to setup appropriate convertor, see <a class="el" href="classrr_1_1_r_r_solver.html#af31f84d6f426c94293f5a44c63632e22" title="Set colorSpace used by this scene i/o operations.">RRSolver::setColorSpace()</a>. <a class="el" href="classrr_1_1_r_r_color_space.html" title="Interface for custom color space.">RRColorSpace</a> converts your values to and from our linear colors. <br  />
<br  />
 In typical situations, it is most straightforward to think and communicate in screen colors. This means you can set nearly all inputs in screen colors (scaled to 0-1 range) and read all outputs in screen colors. To setup this mode, call RRSolver::setColorSpace(RRColorSpace::create_sRGB()). RealtimeRadiosity sample demonstrates it.</p>
<h1><a class="anchor" id="gunits2"></a>
Geometry units</h1>
<p>All sizes and positions in space are expressed in generic units, Lightsprint doesn't need to know if it's meter, inch or parsec. However, some functions have default parameter values calibrated for human-sized scenes specified in meters (feature sizes roughly between 0.01 and 100 units), so using meters may give you advantage in typical scenes. <br  />
<br  />
 If it's possible, existing scene adapters adapt your scene from custom units to meters. (Source code of adapters is in src/LightsprintIO/ *.*)</p>
<h1><a class="anchor" id="gscale"></a>
Scale</h1>
<p>Lightsprint libraries support all types of scaled objects: positively, negatively, uniformly, non-uniformly. Negative scale, however, could bring inconsistent lighting in some GI solvers.</p>
<h1><a class="anchor" id="gowner"></a>
Ownership</h1>
<p>Dynamically created objects (using new, create() etc) are nearly never adopted, ownership does not change. <br  />
 This means that parameters that need to be destructed are not destructed inside called function, responsibility for object is not passed to someone else. So when you create object, delete it yourself when no longer needed. <br  />
<br  />
 The only exception to this rule is <a class="el" href="classrr_1_1_r_r_buffer.html" title="Buffer, array of elements.">RRBuffer</a> - classes <a class="el" href="classrr_1_1_r_r_object_illumination.html" title="Data structure with object&#39;s illumination and more.">RRObjectIllumination</a> and <a class="el" href="structrr_1_1_r_r_material.html" title="Description of material properties of a surface.">RRMaterial</a> adopt textures and delete them destructor.</p>
<h1><a class="anchor" id="gref"></a>
Reference counting</h1>
<p>There is no internal reference counting in majority of Lightsprint SDK, so if you create e.g. <a class="el" href="classrr_1_1_r_r_collider.html" title="Finds ray - trianglemesh intersections.">RRCollider</a> out of <a class="el" href="classrr_1_1_r_r_mesh.html" title="Common interface for any standard or proprietary triangle mesh structure.">RRMesh</a>, you are not allowed to destroy mesh before destroying collider. This danger should be mentioned on all appropriate places. <br  />
<br  />
 The only exception to this rule is <a class="el" href="classrr_1_1_r_r_buffer.html" title="Buffer, array of elements.">RRBuffer</a>, it has built-in reference counter.</p>
<h1><a class="anchor" id="gfinite"></a>
Finite numbers</h1>
<p>If not otherwise specified, all inputs must be finite numbers. With Inf or NaN input, result of any operation is undefined.</p>
<h1><a class="anchor" id="gmatrices"></a>
Matrices</h1>
<p>Lightsprint uses 3x4 matrices for description of object transformation. See <a class="el" href="structrr_1_1_r_r_matrix3x4.html" title="Matrix of 3x4 real numbers in row-major order.">RRMatrix3x4</a> for explanation why we found it optimal.</p>
<h1><a class="anchor" id="gup"></a>
Up vector</h1>
<p>Although there is no limitation on orientation of 'up' vector, lighting works the same in all directions, all importers try to convert data so that 'up' is in positive Y (0,1,0), and camera navigation in samples expects the same. There is no special reason for Y axis, but it helps to be consistent across whole SDK. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">index</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
