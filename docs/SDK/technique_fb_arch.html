<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LightsprintSDK: Fireball, Architect</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">LightsprintSDK<span id="projectnumber">&#160;2021.08.08</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('technique_fb_arch.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Fireball, Architect</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Realtime lighting using dynamic lights is a mainstream approach today, however its realism was always severely limited by lack of properly computed indirect light. <br  />
 Fireball and Architect techniques solve this realtime global illumination problem (see <a class="el" href="samples_realtime.html">samples</a>), however, quality suffers in presence of certain geometry "errors", so you might have to clean up your geometry. <br  />
 Following hints help you get good performance and quality in your projects.</p>
<p>For purpose of realtime GI calculation, we expect scene split in two parts, static and dynamic.</p>
<h1><a class="anchor" id="artist_realtime_static"></a>
Static scene</h1>
<p>Static scene is a scene skeleton, big objects that never move, e.g. walls. Number of triangles in static scene is the most important performance and memory footprint factor, so we recommend creating as lowpoly walls as possible, with eventual details baked into normal maps or height maps.</p>
<p>Huge unnecessary polygons (e.g. box around scene) reduce speed and quality, remove them.</p>
<p>To achieve the best quality and performance, keep triangle sizes similar (on the same order of magnitude), avoid mixing very small and very large triangles. If very large polygon must be present, and it reflects light, tessellate scene a bit, just to break huge triangles - GI quality will improve. Don't tessellate too much, both performance and quality would drop.</p>
<p>Realtime GI consists of several components mixed together: per-pixel direct lighting, per-pixel indirect lighting and per-vertex indirect lighting. Because of per-vertex component, all static meshes must satisfy one simple rule required by all engines with per-vertex lighting: <br  />
 Two triangles are disjunct, share 1 vertex or share 1 edge and 2 vertices. <br  />
 So in other words, it is not allowed to</p><ul>
<li>overlap triangles</li>
<li>intersect triangles</li>
<li>place edge in the middle of other triangle</li>
<li>place vertex in the middle of other edge</li>
</ul>
<div class="image">
<img src="triangles.png" alt=""/>
</div>
<p>See that all forbidden cases can be easily fixed. This operation can be automated.</p>
<p>It is also recommended to avoid 'needles', triangles with needle-like shape, as artifacts may appear in their proximity.</p>
<h1><a class="anchor" id="artist_realtime_dynamic"></a>
Dynamic scene</h1>
<p>Dynamic scene is made of objects that freely move and of small objects. Number of triangles in dynamic scene has no impact on performance, so we recommend using as detailed models as suitable.</p>
<p>Realtime GI is fully per-pixel, so restrictions related to per-vertex lighting don't apply to dynamic objects.</p>
<h1><a class="anchor" id="artist_realtime_materials"></a>
Materials</h1>
<p>All material types are supported. There's no need for any additional information, Lightsprint automatically converts your engine's native materials to Lightsprint materials used during calculation. Complex materials don't slow down GI calculation, so we recommend using as good looking materials as possible.</p>
<h1><a class="anchor" id="artist_realtime_lights"></a>
Lights</h1>
<p>All light sources are supported - point, spot, directional, emissive materials, sky (flat color, LDR or HDR texture) and they may arbitrarily change in realtime.</p>
<h1><a class="anchor" id="artist_realtime_formats"></a>
File formats</h1>
<p>Lightsprint SDK does not lock your data in properietary formats. Instead, it supports <a class="el" href="supported_formats.html">95+ standard file formats</a>. In case you pick Collada, here's list of available <a class="el" href="collada_plugins.html">Collada plugins</a>.</p>
<h1><a class="anchor" id="artist_realtime_night"></a>
Night scenes</h1>
<p>When creating night scene, you might consider two options - reduce light intensity or make materials darker. Both have the same effect on direct illumination. But global illumination reveals dramatic difference - bright materials reflect lots of light and create rich indirect illumination with color bleeding; dark materials absorb light and hardly create any indirect illumination. So reducing light intensity simulates night in normal world; making all materials dark simulates day in world covered by black color. Of course we recommend keeping usual materials and reducing light intensity, results look better.</p>
<h1><a class="anchor" id="artist_realtime_examples"></a>
Problem examples</h1>
<table border="0">
<tr align="top">
<td><div class="image">
<img src="tessel1.jpg" alt=""/>
</div>
 </td><td><div class="image">
<img src="tessel2.jpg" alt=""/>
</div>
 </td></tr>
</table>
<p>Above screenshots show realtime GI from skylight coming through ceiling opening. There are some quality issues vissible.</p>
<ul>
<li>Floor lighting is completely flat, it is not darker in corners. Why? Indirect component of realtime GI is stored per-vertex, and the floor does not have sufficient number of vertices. Second screenshot with wireframe shows that there are only two vertices in corners. In order to get higher quality lighting that includes details like darker corners, you can pick one of these approaches:<ul>
<li>split large polygons (preprocessing outside Lightsprint SDK)</li>
<li>precalculate light detail maps (preprocessing within Lightsprint SDK)</li>
<li>use one of many realtime ambient occlusion techniques (might be less accurate, but needs no preprocessing)</li>
<li>make the floor shiny and use Lightsprint renderer, automatic mirror reflection on flat objects has no problem with insufficient tessellation</li>
</ul>
</li>
<li>There is lighter/darker pattern visible on the wall. Why? It's because floor intersects wall triangles, as can be seen on screenshot with wireframe. Upper parts of wall triangles are illuminated, bottom parts (under the floor) stay in the dark. Indirect component of realtime GI is stored per-vertex, so we can't change indirect lighting at the floor level, it is interpolated between darker vertices under the floor, and brighter vertices above the floor and unwanted pattern shows up. It can be fixed by better stitching floor and wall polygons, or by splitting triangles that intersect. Intersecting triangles are not allowed in static objects, as was mentioned earlier on this page.</li>
<li>Walls and ceiling are tessellated too much. This creates 'vertex noise' in renderings, if Fireball quality is not set high enough. It is not visible here, because sufficient 'quality' 10000 was set, but we can optimize performance by tessellating less, from 5x5 or 10x10 vertices per wall, rather than 20x20 here. It would give similar results at much lower Fireball quality, i.e. Fireball build (precalculation) would be faster, framerate with realtime GI would be bit higher and memory footprint lower. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">index</a></li><li class="navelem"><a class="el" href="main_techniques.html">Techniques</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
